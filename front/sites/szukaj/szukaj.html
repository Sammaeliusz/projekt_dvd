<!DOCTYPE html>
<html lang="pl">                                                                                                                                                                                                                                                                                                                                                        <html>
	<head>
		<meta charset="utf-8">
		<title>Szukaj</title>
		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
		<link rel="stylesheet" href="static/szukaj/basic.css">
		
		<meta name="viewport" initial-scale="1.0">
		<meta name="description" content="Lokalny Projekt klasowy wypożyczalnia DVD">
		<meta name="theme-color" content="#366cb4">
	</head>
	<body>
		<div class="navigation-bar" id="navhold">
			<div class="navigation-block">
				<div class="right-side">
					<div class="navigation-tab">
						<a><button onclick="userclick()" aria-label="Login/Panel"><img src="static/images/proba.png" alt="Panel or Login"></button></a>
					</div>
					<div class="navigation-tab">
						<a href="#"><button class="tabbutt" onclick="">FAQ</button></a>
					</div>
					<div class="navigation-tab">
						<a href="#"><button class="tabbutt" onclick="">Kontakt</button></a>
					</div>
					<div class="navigation-tab">
						<a href="/szukaj"><button class="tabbutt" onclick="">Zboiry</button></a>
					</div>
					<div class="navigation-tab">
						<a href="/"><button class="tabbutt" onclick="">Strona Główna</button></a>
					</div>
				</div>
				<div class="left-side">
					<div class="navigation-tab">
						<a href="#"><input class="tabinput" onclick="" onkeydown="search(this);"></a>
					</div>
					<div class="navigation-tab">
						<a href="#"><button class="tabbutt" onclick="">O</button></a>
					</div>
				</div>
			</div>
		</div>
		
		<div class="menu-left" id="leftmenu">
			<div class="menu-left-holder">
				<div class="menu-left-tab">
					<p>Menu</p>
				</div>
				<div class="menu-left-tab">
					<a><button>HaHa1</button></a>
				</div>
				<div class="menu-left-tab">
		
				</div>
				<div class="menu-left-tab">
		
				</div>
			</div>
			<div class="menu-left-button">
				<button onclick="leftmenu()">=</button>
			</div>
		</div>
		
		<div class="holder-left">
			<div class="filter">
				<div class="filter-section">
					<input type="text" name="title" id="title" placeholder="tytuł">
				</div>
				<div class="filter-section">
					<div class="minmax">
						<div class="minmaxlabel"><label>min</label></div>
						<div class="minmaxlabel"><label>kategoria wiekowa</label></div>
						<div class="minmaxlabel"><label>max</label></div>
					</div>
					<div class="minmax">
						<input type="number" name="min" id="an" placeholder="0">
						<input type="number" name="max" id="ax" placeholder="99">
					</div>
				</div>
				<div class="filter-section">
					<div class="minmax">
						<div class="minmaxlabel"><label>min</label></div>
						<div class="minmaxlabel"><label>data produkcji</label></div>
						<div class="minmaxlabel"><label>max</label></div>
					</div>
					<div class="minmax">
						<input type="number" name="min" id="pn" placeholder="0">
						<input type="number" name="max" id="px" placeholder="9999">
					</div>
				</div>
				<div class="filter-section">
					<input type="text" name="director" id="dir" placeholder="reżyser">
				</div>
				<div class="filter-section">
					<div class="onstock">
						<input type="checkbox" name="onstock" id="on">
						<label for="on">Wymuś dostępność</label>
					</div>
				</div>
				<div class="filter-section">
					% for x in tags:
					<div class="onstock">
						<input type="checkbox" name="{{x}}" id="{{x}}">
						<label for="{{x}}">{{x}}</label>
					</div>
					% end
				</div>
				<button class="look" onclick="look();">Szukaj</button>
			</div>
		</div>
		<div class="holder-right">
			<div class="intro">
				<h2>Wyniki wyszukiwania</h2>
			</div>
			<div class="movie-card-list" id="js"></div>
		</div>
		
		<script>
			function userclick(){
				if(document.cookie.search('id')!=-1){
					window.open('/panel', '_self')
				}else{
					window.open('/logowanie', '_self')
				}
			}
			function leftmenu(){
				if(!lmb){
					var lm = document.getElementById("leftmenu")
					lm.style.left = "0px"
					lmb = true;
				}
				else{
					var lm = document.getElementById("leftmenu")
					lm.style.left = "-310px"
					lmb = false;
				}
			}
			var lmb = false;
			window.onload = function (){
				document.body.onscroll = function () {
						var nb = document.getElementById("navhold")
						var lm = document.getElementById("leftmenu")
						nb.style.top = window.scrollY
						lm.style.top = "calc("+window.scrollY+"px + 50px)"
					}
				tags = []
				% for x in tags:
				tags.push("{{x}}")
				% end
				% if title:
				title.value = "{{title}}"
				% end
				look();
			}

			function look(){
				const xhr = new XMLHttpRequest()
				xhr.open('POST', '/ajax/lookup')
				xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
				xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')
				xhr.onload = function () {
					let x = document.getElementById("js")
					x.innerHTML = xhr.responseText
				}
				

				active = []
				tags.forEach(element => {
					if(document.getElementById(element).checked == true){
						active.push(element)
					}
				});
				xhr.send(`title=${title.value}&age_min=${an.value}&age_max=${ax.value}&director=${dir.value}&production_min=${pn.value}&production_max=${px.value}&stock=${on.value}&categories=${active.toString()}`)
			}

			function openWindowWithPost(url, data) {
				var form = document.createElement("form");
				form.target = "_self";
				form.method = "POST";
				form.action = url;
				form.style.display = "none";

				for (var key in data) {
					var input = document.createElement("input");
					input.type = "hidden";
					input.name = key;
					input.value = data[key];
					form.appendChild(input);
				}
				document.body.appendChild(form);
				form.submit();
				document.body.removeChild(form);
			}

			function search(ele) {
				if(event.key === 'Enter') {
					openWindowWithPost("/szukaj", {
						title: ele.value
					});
				}
			}
			</script>

	</body>
</html><!DOCTYPE html>
<html lang="pl">                                                                                                                                                                                                                                                                                                                                                        <html>
	<head>
		<meta charset="utf-8">
		<title>{{title}}</title>
		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
		<link rel="stylesheet" href="static/szukaj/basic.css">
		
		<meta name="viewport" initial-scale="1.0">
		<meta name="description" content="Lokalny Projekt klasowy wypożyczalnia DVD">
		<meta name="theme-color" content="#366cb4">
	</head>
	<body>
		<div class="navigation-bar" id="navhold">
			<div class="navigation-block">
				<div class="right-side">
					<div class="navigation-tab">
						<a><button onclick="userclick()" aria-label="Login/Panel"><img src="static/images/proba.png" alt="Panel or Login"></button></a>
					</div>
					<div class="navigation-tab">
						<a href="#"><button class="tabbutt" onclick="">FAQ</button></a>
					</div>
					<div class="navigation-tab">
						<a href="#"><button class="tabbutt" onclick="">Kontakt</button></a>
					</div>
					<div class="navigation-tab">
						<a href="/"><button class="tabbutt" onclick="">Strona Główna</button></a>
					</div>
				</div>
				<div class="left-side">
					<div class="navigation-tab">
						<a href="#"><input class="tabinput" onclick="" onkeydown="search(this);"></a>
					</div>
					<div class="navigation-tab">
						<a href="#"><button class="tabbutt" onclick="">O</button></a>
					</div>
				</div>
			</div>
		</div>
		
		<div class="menu-left" id="leftmenu">
			<div class="menu-left-holder">
				<div class="menu-left-tab">
					<p>Menu</p>
				</div>
				<div class="menu-left-tab">
					<a><button>HaHa1</button></a>
				</div>
				<div class="menu-left-tab">
		
				</div>
				<div class="menu-left-tab">
		
				</div>
			</div>
			<div class="menu-left-button">
				<button onclick="leftmenu()">=</button>
			</div>
		</div>
		
		<div class="holder-left">
			<div class="filter">
				<div class="filter-section">
					<input type="text" name="title" id="title" placeholder="tytuł">
				</div>
				<div class="filter-section">
					<div class="minmax">
						<div class="minmaxlabel"><label>min</label></div>
						<div class="minmaxlabel"><label>kategoria wiekowa</label></div>
						<div class="minmaxlabel"><label>max</label></div>
					</div>
					<div class="minmax">
						<input type="number" name="min" id="an" placeholder="0">
						<input type="number" name="max" id="ax" placeholder="99">
					</div>
				</div>
				<div class="filter-section">
					<div class="minmax">
						<div class="minmaxlabel"><label>min</label></div>
						<div class="minmaxlabel"><label>data produkcji</label></div>
						<div class="minmaxlabel"><label>max</label></div>
					</div>
					<div class="minmax">
						<input type="number" name="min" id="pn" placeholder="0">
						<input type="number" name="max" id="px" placeholder="9999">
					</div>
				</div>
				<div class="filter-section">
					<input type="text" name="director" id="dir" placeholder="reżyser">
				</div>
				<div class="filter-section">
					<div class="onstock">
						<input type="checkbox" name="onstock" id="on">
						<label for="on">Wymuś dostępność</label>
					</div>
				</div>
				<div class="filter-section">
					% for x in tags:
					<input type="checkbox" name="{{x}}" id="{{x}}">
					<label for="{{x}}">{{x}}</label>
					% end
				</div>
				<button class="look" onclick="look();">Szukaj</button>
			</div>
		</div>
		<div class="holder-right">
			<div class="intro">
				<h2>Wyniki wyszukiwania</h2>
			</div>
			<div class="movie-card-list" id="js"></div>
		</div>
		
		<script>
			function userclick(){
				if(document.cookie.search('id')!=-1){
					window.open('/panel', '_self')
				}else{
					window.open('/logowanie', '_self')
				}
			}
			function leftmenu(){
				if(!lmb){
					var lm = document.getElementById("leftmenu")
					lm.style.left = "0px"
					lmb = true;
				}
				else{
					var lm = document.getElementById("leftmenu")
					lm.style.left = "-310px"
					lmb = false;
				}
			}
			var lmb = false;
			window.onload = function (){
				document.body.onscroll = function () {
						var nb = document.getElementById("navhold")
						var lm = document.getElementById("leftmenu")
						nb.style.top = window.scrollY
						lm.style.top = "calc("+window.scrollY+"px + 50px)"
					}
				tags = []
				% for x in tags:
				tags.push("{{x}}")
				% end
				% if title:
				title.value = "{{title}}"
				% end
				look();
			}

			function look(){
				const xhr = new XMLHttpRequest()
				xhr.open('POST', '/ajax/lookup')
				xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
				xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')
				xhr.onload = function () {
					let x = document.getElementById("js")
					x.innerHTML = xhr.responseText
				}
				

				active = []
				tags.forEach(element => {
					if(document.getElementById(element).checked == true){
						active.push(element)
					}
				});
				xhr.send(`title=${title.value}&age_min=${an.value}&age_max=${ax.value}&director=${dir.value}&production_min=${pn.value}&production_max=${px.value}&stock=${on.value}&categories=${active.toString()}`)
			}

			function openWindowWithPost(url, data) {
				var form = document.createElement("form");
				form.target = "_self";
				form.method = "POST";
				form.action = url;
				form.style.display = "none";

				for (var key in data) {
					var input = document.createElement("input");
					input.type = "hidden";
					input.name = key;
					input.value = data[key];
					form.appendChild(input);
				}
				document.body.appendChild(form);
				form.submit();
				document.body.removeChild(form);
			}

			function search(ele) {
				if(event.key === 'Enter') {
					openWindowWithPost("/szukaj", {
						title: ele.value
					});
				}
			}
			</script>

	</body>
</html>