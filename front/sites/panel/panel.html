<html lang="pl">                                                                                                                                                                                                                                                                                                                                                        <html>
	<head>
		<meta charset="utf-8">
		<title>{{user[1]}}</title>
		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
		<link rel="stylesheet" href="static/panel/basic.css">
		
		<meta name="viewport" initial-scale="1.0">
		<meta name="description" content="Lokalny Projekt klasowy wypożyczalnia DVD">
		<meta name="theme-color" content="#366cb4">
	</head>
	<body>
		<div class="navigation-bar" id="navhold">
			<div class="navigation-block">
				<div class="right-side">
					<div class="navigation-tab">
						<a><button onclick="userclick()" aria-label="Login/Panel"><img src="static/images/proba.png" alt="Panel or Login"></button></a>
					</div>
					<div class="navigation-tab">
						<a href="#"><button class="tabbutt" onclick="">FAQ</button></a>
					</div>
					<div class="navigation-tab">
						<a href="#"><button class="tabbutt" onclick="">Kontakt</button></a>
					</div>
					<div class="navigation-tab">
						<a href="/szukaj"><button class="tabbutt" onclick="">Zboiry</button></a>
					</div>
					<div class="navigation-tab">
						<a href="/"><button class="tabbutt" onclick="">Strona Główna</button></a>
					</div>
				</div>
				<div class="left-side">
					<div class="navigation-tab">
						<a href="#"><input class="tabinput" onclick="" onkeydown="search(this);"></a>
					</div>
					<div class="navigation-tab">
						<a href="#"><button class="tabbutt" onclick="">O</button></a>
					</div>
				</div>
			</div>
		</div>
		
		<div class="menu-left" id="leftmenu">
			<div class="menu-left-holder">
				<div class="menu-left-tab">
					<p>Menu</p>
				</div>
				% if admin:
				<div class="menu-left-tab">
					<a><button onclick="window.location.href = '/admin'">Przejdź do panelu Admina</button></a>
				</div>
				% end
			</div>
			<div class="menu-left-button">
				<button onclick="leftmenu()">=</button>
			</div>
		</div>

		<div class="holder-left">
			<div class="intro">
				<h2>Cześć, {{user[1]}}! Dobrze cię znów widzieć :)</h2>
			</div>
			<div class="info">
				<div class="info-row">
					<div class="info-column left">
						<p>Nazwa użytkownika</p>
					</div>
					<div class="info-column right">
						<p>{{user[1]}}</p>
					</div>
				</div>
				<div class="info-row">
					<div class="info-column left">
						<p>adres e-mail</p>
					</div>
					<div class="info-column right">
						<p>{{user[2]}}</p>
					</div>
				</div>
				<div class="butts">
					<button class="bob" onclick="Zmiana()">Zmień dane</button>
					<button class="bob" onclick="sendData()">Usuń konto</button>
					<form action="" method="post">
						<button class="bob" type="submit" name="logout" value="Wyloguj">Wyloguj</button>
					</form>
				</div>
			</div>
		</div>
		<div class="holder-right">
			<div class="infos">
				<div class="info">
					<p>Wypożyczone filmy</p>
				</div>
				<div class="info">
					<p>Historia wypożyczeń</p>
				</div>
			</div>
			<div class="movie-list">
				<div class="movie-card-list">
					<div class="movie-card-list-holder">
					% for x in rented:
						<div class="movie-card">
							<form method="get">
								<div class="movie-card-button">
									<button name="mid" value="{{x.id}}">
										<div class="movie-card-text">
											<div class="movie-card-text-padding">
												<div class="movie-card-text-50"><p>Nazwa</p></div>
												<div class="movie-card-text-50"><p>{{x.name}}</p></div>
											</div>
											<div class="movie-card-text-padding">
												<div class="movie-card-text-50"><p>Wypożyczono</p></div>
												<div class="movie-card-text-50"><p>{{x.rent}}</p></div>
											</div>
											<div class="movie-card-text-padding">
												<div class="movie-card-text-50"><p>Zwrot planowany</p></div>
												<div class="movie-card-text-50"><p>{{x.return_date}}</p></div>
											</div>
											% if x.to_return:
											<div class="movie-card-text-padding">
												<div class="movie-card-text-50"><p style="color:red; font-weight: bold;">ZALEGA ZE ZWROTEM</p></div>
											</div>
											% end
										</div>
										<div class="movie-card-image">
											<img src={{x.file}} alt="{{x.name}}">
										</div>
									</button>
								</div>
							</form>
							<button class="movie-card-button-inside" onclick='zwrot({{x.id}})'>Zwrot</button>
						</div>
					% end
					</div>
				</div>
				<div class="movie-card-list">
					<div class="movie-card-list-holder">
					% for x in history:
						<div class="movie-card">
							<form method="get">
								<div class="movie-card-button">
									<button name="mid" value="{{x.id}}">
										<div class="movie-card-text">
											<div class="movie-card-text-padding">
												<div class="movie-card-text-50"><p>Nazwa</p></div>
												<div class="movie-card-text-50"><p>{{x.name}}</p></div>
											</div>
											<div class="movie-card-text-padding">
												<div class="movie-card-text-50"><p>Wypożyczono</p></div>
												<div class="movie-card-text-50"><p>{{x.rent}}</p></div>
											</div>
											<div class="movie-card-text-padding">
												<div class="movie-card-text-50"><p>Zwrot planowany</p></div>
												<div class="movie-card-text-50"><p>{{x.return_date}}</p></div>
											</div>
											<div class="movie-card-text-padding">
												<div class="movie-card-text-50"><p>Zwrot realny</p></div>
												<div class="movie-card-text-50"><p>{{x.real_return}}</p></div>
											</div>
										</div>
										<div class="movie-card-image"><img src={{x.file}} alt="{{x.name}}"></div>
									</button>
								</div>
							</form>
						</div>
					% end
					</div>
				</div>
			</div>
		</div>
		<script>
			function zal(){
				let x = []
				% for x in return_popup:
					x.push("{{x}}")
				% end
				if(x.lenght > 0){
					alert('Masz zaległe filmy!\n\nZaległe filmy:\n'+x.join('\n'))
				}
			}
			function actual(){
				document.getElementById("inrow").style.transform = "translatex(25%)";
				document.getElementById("actual").style.transform = "translatex(0%)";
				document.getElementById("history").style.transform = "translatex(5%)"
			}
			function history(){
				document.getElementById("inrow").style.transform = "translatex(-25%)";
				document.getElementById("actual").style.transform = "translatex(-5%)";
				document.getElementById("history").style.transform = "translatex(0%)"
			}
			function userclick(){
				if(document.cookie.search('id')!=-1){
					window.open('/panel', '_self')
				}else{
					window.open('/logowanie', '_self')
				}
			}
			function leftmenu(){
				if(!lmb){
					var lm = document.getElementById("leftmenu")
					lm.style.left = "0px"
					lmb = true;
				}
				else{
					var lm = document.getElementById("leftmenu")
					lm.style.left = "-310px"
					lmb = false;
				}
			}
			var lmb = false;
			window.onload = function (){
				console.log("keu");
				document.body.onscroll = function () {
						var nb = document.getElementById("navhold")
						var lm = document.getElementById("leftmenu")
						nb.style.top = window.scrollY
						lm.style.top = "calc("+window.scrollY+"px + 50px)"
					}}
			function sendData(){
				if (confirm("Czy na pewno chcesz usunąć konto?")){
					const xhr = new XMLHttpRequest()
        			xhr.open('POST', '/panel')
        			xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
        			xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest')
        			fd='delete=1'
        			xhr.send(fd)
					window.open('/logowanie', '_self')
				}
			}
			zal()

			function openWindowWithPost(url, data) {
				var form = document.createElement("form");
				form.target = "_self";
				form.method = "POST";
				form.action = url;
				form.style.display = "none";

				for (var key in data) {
					var input = document.createElement("input");
					input.type = "hidden";
					input.name = key;
					input.value = data[key];
					form.appendChild(input);
				}
				document.body.appendChild(form);
				form.submit();
				document.body.removeChild(form);
			}

			function search(ele) {
				if(event.key === 'Enter') {
					openWindowWithPost("/szukaj", {
						title: ele.value
					});
				}
			}

			function Zmiana() {
				location.href = './zmiana'
			}
			
			function zwrot(x){
				openWindowWithPost("/panel", {
						zwrot: x
					});
			}
		</script>
	</body>
</html>
